#@TYPE: Machine
#@NAME: Nvidia Jetson Xavier NX dev kit
#@DESCRIPTION: Nvidia Jetson Xavier NX development kit with
#              QSPI+SDcard module (SKU 0000)

TEGRA_BOARDSKU ?= "0000"
TEGRA_BUPGEN_SPECS ?= "fab=100;boardsku=0000;boardrev= \
		       fab=200;boardsku=0000;boardrev= \
		       fab=300;boardsku=0000;boardrev="
IMAGE_ROOTFS_ALIGNMENT ?= "1024"

KERNEL_DEVICETREE ?= "nvidia/tegra194-p3509-0000+p3668-0000.dtb"
KERNEL_ROOTSPEC ?= "root=/dev/mmcblk0p1 rootwait"
KERNEL_ARGS ?= "earlycon=uart8250,mmio32,0x3100000 console=ttyS0,115200 fbcon=map:0 ${KERNEL_ROOTSPEC}"
SERIAL_CONSOLES ?= "115200;ttyS0"

PREFERRED_PROVIDER_virtual/bootloader ?= "jetson-uefi-prebuilt"
PREFERRED_PROVIDER_virtual/kernel ?= "linux-tegra-upstream"

require conf/machine/include/xavier-nx.inc

MACHINEOVERRIDES =. "uefi:"
MACHINE_ESSENTIAL_EXTRA_RDEPENDS = "linux-firmware-nvidia-tegra linux-firmware"
TEGRA_INITRD_FIRMWARE ?= "linux-firmware-nvidia-tegra"
KERNEL_MODULE_AUTOLOAD = ""

EMMC_SIZE ?= ""
PARTITION_LAYOUT_TEMPLATE ?= "flash_t194_uefi_spi_sd_p3668.xml"
TEGRA_SPIFLASH_BOOT ?= "1"
TEGRAFLASH_SDCARD_SIZE ?= "16G"
